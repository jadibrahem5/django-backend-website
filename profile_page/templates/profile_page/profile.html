{% extends 'main.html' %}
{% block content %}
{% if request.user.is_authenticated %}

    <div class="container">
        <div class="todo-list">
        <h2>Add a new todolist</h2>
         <div>
        <form method="POST" action="">
        {% csrf_token %}
        <label>add the new list :</label>
        <input type="text" name="listname" placeholder="enter list name"\>
        <input type="submit" value="add"/>
            </form>
         </div>
        {% for todo in todolist%}
            <a href="{% url 'list'  todo.id%}" style='font-size:2.2em'>{{todo}}</a>
            <a href="{% url 'task_create' %}">Create task</a>
            {% for task in object_list %}
                {% if task.todo_list == todo %}
                    {% if request.user == task.user  %}
                        <div class="item-row">
                            {% if task.complete == True %}
                            <strike>{{task.name}}-{{task.title}}-{{task.due}}</strike>
                            {% else %}
                            <span>{{task.name}}-{{task.title}}</span>
                            <span style="float: right;" class="timer"><b>finish time:</b> {{ task.due|timeuntil }}</span>
                            {% endif %}
                            <a class="btn btn-sm btn-light" href="{% url 'task_update' task.id %}">Update</a>
                            <a class="btn btn-sm btn-light" href="{% url 'task_delete' task.id %}">delete</a>
                        </div>
                   {% endif %}
                {% endif %}
            {% endfor %}
        {% endfor %}
        <h2>===================================================================================================</h2>
        <br>
        <a href="{% url 'day_create' %}" style='font-size:1.1em'>add a new routin</a>
        {% for rot in routin %}
        {% if request.user == rot.user  %}
            <h1>{{rot.name}}</h1>
            <a href="{% url 'routin_delete'  rot.id %}" style='font-size:1.0em'>delete the routin</a>
            <h2>{{rot.date_start}}</h2>
            <a href="{% url 'new_day' %}" style='font-size:1.1em'>add training days for your routin</a>
            {% for d in day %}
                {% if d.routin == rot  %}
                <br>
                <a href="{% url 'edit_day'  d.id %}" style='font-size:1.8em'>{{d.name}}:</a>
                <br>
                <button type="submit"><a href="{% url 'delete_day'  d.id %}">DELETE</a></button>
                <h3>Exercises:</h3>
                {% for x in d.exercise.all %}
                     <li>{{x.name}}</li>
                     <button type="submit"><a href="{% url 'exercise_detail'  x.id %}">detail</a></button>
                     <button type="submit"><a href="{% url 'exercise_update'  x.id %}">update</a></button>
                     <button type="submit"><a href="{% url 'exercise_confirm_delete'  x.id %}">DELETE</a></button>
                {% empty %}
                   <li>No exercises.</li>
                {% endfor %}
                {% endif %}
            {% endfor %}
              <a href="{% url 'exercise_create' %}">Create exercise</a>

            {% endif %}
     {% endfor %}
{% endif %}

        </div>
    </div>
<!--  <h1>TODAY TASKS</h1>-->
<!--{% for instance in object_list %}-->
<!--    {% if request.user == instance.user  %}-->
<!--     <p>{{ instance.user }}-{{ instance.id }} - {{ instance.title }}</a></p>-->
<!--    <button type="submit"><a href="{% url 'task_delete' instance.id %}">delete</a></button>-->

<!--    <button type="submit"><a href="{% url 'task_update'  instance.id %}">update</a></button>-->

<!--     {% endif %}-->
<!--{% endfor %}-->
<!--<hr>-->
<!--<a href="{% url 'task_create' %}">Create task</a>-->
<hr>

<script>
    $(document).ready(function(){
      var date_input=$('input[name="due"]'); //our date input has the name "date"
      var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
      var options={
        dateFormat: 'yy-mm-dd',
      };
      date_input.datepicker(options);
    })
</script>
<iframe src="https://free.timeanddate.com/countdown/i8myr5wf/n487/cf12/cm0/cu4/ct0/cs1/ca0/cr0/ss1/cac000/cpc000/pc909/tc000/fn3/fs100/szw448/szh189/tatTime%20left%20to%20Event%20in/tac000/tptTime%20since%20Event%20started%20in/tpc000/mac000/mpc000/iso2022-12-18T00:00:00/bo3/pd2" allowtransparency="true" frameborder="0" width="281" height="89"></iframe>
{% endblock content %}